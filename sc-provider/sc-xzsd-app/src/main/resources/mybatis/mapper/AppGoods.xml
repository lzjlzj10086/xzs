<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.xzsd.app.goods.dao.GoodsDao">
    <select id="findGoodsById" parameterType="java.lang.String" resultType="com.xzsd.app.goods.entity.Goods">
        select
            g.goods_code goodsCode,
            g.goods_Name goodsName,
            g.book_id bookId,
            g.goods_notes goodsNotes,
            g.price price,
            g.image goodsImage,
            g.writer writer,
            g.goods_notes goodsNotes,
            s.stores_name storesName,
            s.stores_address storesAddress
        from t_goods g,t_stores s
        where g.goods_code = #{goodsCode} and s.stores_invite_code = (SELECT invite_code FROM t_user WHERE user_code = #{userId})
    </select>
    <select id="listGoodsJudgeByPage" parameterType="java.lang.String" resultType="com.xzsd.app.goods.entity.GoodsJudge">
        select
            user_acct userAcct,
            content content,
            star_level starLevel,
            judge_time judgeTime,
            image_url imageUrl
        from t_sys_judge
        where is_deleted = 0 and goods_code = #{goodsCode}
        order by create_time desc
    </select>
    <select id="listFirstLeveL" resultType="com.xzsd.app.goods.entity.GoodsLevel">
        select
            level_code levelCode,
            level_name levelName
        from t_goodslevel
        where is_deleted = 0
    </select>
    <select id="listSecondLevelAndGoodsByPage" parameterType="java.lang.String" resultType="com.xzsd.app.goods.entity.Goods">
        select
            goods_code goodsCode,
            goods_name goodsName,
            image goodsImage,
            price price
        from t_goods
        where is_deleted = 0 and firstlevel_code = #{firstLevelCode}
    </select>
</mapper>